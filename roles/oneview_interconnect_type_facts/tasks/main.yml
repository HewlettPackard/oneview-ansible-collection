---
- name: Fetch Session Id
  oneview_get_session_id:
    config: "{{ config }}"
    name: "Test_Session"
  delegate_to: localhost
  register: session

- debug: var=session

- name: Gather facts about all Interconnect Types
  oneview_interconnect_type_facts:
    config: "{{ config }}"
    sessionID: "{{ session.ansible_facts.session }}"
  delegate_to: localhost

- debug: msg="{{interconnect_types | map(attribute='name') | list }}"

- name: Gather paginated, filtered and sorted facts about Interconnect Types
  oneview_interconnect_type_facts:
    config: "{{ config }}"
    sessionID: "{{ session.ansible_facts.session }}"
    params:
      start: 0
      count: 3
      sort: 'name:descending'
      filter: "maximumFirmwareVersion='4000.99'"

- debug:  msg="{{interconnect_types | map(attribute='name') | list }}"

- name: Gather facts about an Interconnect Type by name {{ interconnect_types.0.name }}
  oneview_interconnect_type_facts:
    config: "{{ config }}"
    sessionID: "{{ session.ansible_facts.session }}"
    logout: true
    name: "{{ interconnect_types.0.name }}"
  delegate_to: localhost

- debug: msg="Found an interconnect type named {{interconnect_types.0.name}} and with uri {{interconnect_types.0.uri}}"